<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <title>Subscription Info</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Fonts: Arad (Persian), Plus Jakarta Sans (English/Latin), Noto Sans SC (Chinese) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Arad:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <style>
        @font-face {
            font-family: Arad;
            font-style: normal;
            font-weight: normal;
            src: url('https://cdn.jsdelivr.net/gh/MohamadDarvishi/Arad/Fonts/main/static-webfont/Arad-Regular.woff2') format('woff2');
            font-display: fallback;
        }

        :root {
            /* Palette: Modern Slate & Blue */
            --bg-color: #f8fafc;
            --surface-color: #ffffff;
            --primary-color: #3b82f6;
            --primary-dark: #2563eb;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --logo-bg: #e2e8f0;
            /* Slightly darker than bg for logo box */
            --dropdown-bg: #ffffff;
            --dropdown-hover: #f1f5f9;

            --success: #10b981;
            --error: #ef4444;

            --radius-lg: 24px;
            --radius-md: 16px;
            --radius-sm: 12px;
            --btn-size: 40px;

            --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.01);
            --dropdown-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Scoped to html tag to prevent conflict with buttons using data-theme="dark" */
        html[data-theme="dark"] {
            --bg-color: #0f172a;
            --surface-color: #1e293b;
            --primary-color: #60a5fa;
            --primary-dark: #3b82f6;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --border-color: #334155;
            --logo-bg: #334155;
            --dropdown-bg: #1e293b;
            --dropdown-hover: #334155;
            --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
            --dropdown-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Plus Jakarta Sans', 'Arad', 'Noto Sans SC', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Main Card */
        .container {
            width: 100%;
            max-width: 420px;
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow);
            overflow: visible;
            /* Changed to visible for dropdowns */
            border: 1px solid var(--border-color);
            position: relative;
        }

        /* Top Bar */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 24px 0 24px;
            position: relative;
            z-index: 20;
        }

        /* Logo Styling */
        .brand-icon {
            width: var(--btn-size);
            height: var(--btn-size);
            background: var(--logo-bg);
            /* Slight difference from bg */
            border-radius: 12px;
            /* Matching button radius */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4px;
            /* Padding inside the box */
            transition: var(--transition);
        }

        .brand-icon svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* Controls (Lang/Theme) */
        .controls {
            display: flex;
            gap: 8px;
        }

        /* Dropdown System */
        .dropdown {
            position: relative;
        }

        .icon-btn {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            width: var(--btn-size);
            height: var(--btn-size);
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .icon-btn:hover,
        .icon-btn.active {
            background: var(--bg-color);
            color: var(--text-primary);
            border-color: var(--text-secondary);
        }

        .icon-btn svg {
            width: 20px;
            height: 20px;
        }

        .dropdown-menu {
            position: absolute;
            top: calc(100% + 8px);
            right: 0;
            /* Align to right edge of button */
            background: var(--dropdown-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: var(--dropdown-shadow);
            min-width: 140px;
            opacity: 0;
            transform: translateY(-10px);
            visibility: hidden;
            transition: var(--transition);
            z-index: 100;
            overflow: hidden;
            padding: 4px;
        }

        [dir="rtl"] .dropdown-menu {
            right: auto;
            left: 0;
        }

        .dropdown.open .dropdown-menu {
            opacity: 1;
            transform: translateY(0);
            visibility: visible;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            padding: 10px 12px;
            border: none;
            background: transparent;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9rem;
            text-align: left;
            cursor: pointer;
            border-radius: 8px;
            transition: background 0.2s;
        }

        [dir="rtl"] .dropdown-item {
            text-align: right;
        }

        .dropdown-item:hover {
            background: var(--dropdown-hover);
        }

        .dropdown-item.selected {
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary-color);
            font-weight: 600;
        }

        .item-icon {
            font-size: 1.1em;
            width: 20px;
            text-align: center;
        }

        /* Header Section */
        .header {
            padding: 20px 24px 24px 24px;
            text-align: center;
        }

        h2 {
            font-size: 1.4rem;
            font-weight: 700;
            margin: 12px 0 24px;
            letter-spacing: -0.02em;
        }

        /* Status Badge */
        .status-container {
            display: flex;
            justify-content: center;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid transparent;
        }

        .status-badge.active {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border-color: rgba(16, 185, 129, 0.2);
        }

        .status-badge.inactive {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
            border-color: rgba(239, 68, 68, 0.2);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            box-shadow: 0 0 8px currentColor;
        }

        /* Info Grid */
        .info-card {
            background: var(--bg-color);
            margin: 0 24px;
            border-radius: var(--radius-md);
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            font-size: 0.95rem;
        }

        .info-row:last-child {
            margin-bottom: 0;
        }

        .info-label {
            color: var(--text-secondary);
        }

        .info-value {
            font-weight: 600;
            color: var(--text-primary);
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        /* Links Section */
        .links-section {
            padding: 32px 24px;
        }

        #links-label {
            display: block;
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-weight: 700;
            letter-spacing: 0.05em;
            margin-bottom: 16px;
        }

        .download-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .download-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            padding: 16px 20px;
            border-radius: var(--radius-sm);
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 600;
            transition: var(--transition);
        }

        .download-btn:hover {
            border-color: var(--primary-color);
            background: rgba(59, 130, 246, 0.02);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .download-btn span {
            word-break: break-all;
        }

        .btn-icon-container {
            min-width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            color: var(--primary-color);
            transition: var(--transition);
        }

        .download-btn:hover .btn-icon-container {
            background: var(--primary-color);
            color: white;
        }

        .btn-icon-container svg {
            width: 18px;
            height: 18px;
        }

        .empty-state {
            text-align: center;
            padding: 24px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.02);
            border-radius: var(--radius-sm);
            border: 1px dashed var(--border-color);
        }

        /* Logic Holders */
        .template-logic-holder {
            display: none !important;
        }

        /* Direction Utility */
        [dir="rtl"] .download-btn {
            flex-direction: row;
        }

        [dir="ltr"] .download-btn {
            flex-direction: row;
        }
    </style>
</head>

<body>

    <div class="container" id="main-container">

        <!-- Top Bar -->
        <div class="top-bar">
            <!-- Logo Box -->
            <div class="brand-icon">
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1"
                    style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
                    viewBox="0 0 1666.66 1666.66" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs>
                        <style type="text/css">
                            .fil0 {
                                fill: none
                            }

                            /* Made transparent */
                            .fil2 {
                                fill: #EA7E20
                            }

                            .fil1 {
                                fill: #1A202C
                            }

                            /* Adjusted for contrast on light/dark if needed, keeping original currently */
                            .fil3 {
                                fill: #EA7E20;
                                fill-rule: nonzero
                            }

                            /* Auto-adjust logo colors based on theme if needed, currently keeping original brand colors */
                            html[data-theme="dark"] .fil1 {
                                fill: #ffffff;
                            }

                            html[data-theme="light"] .fil1 {
                                fill: #1A202C;
                            }
                        </style>
                    </defs>
                    <g id="Layer_x0020_1">
                        <!-- Removed rect background -->
                        <g id="_2264893850736">
                            <path class="fil1"
                                d="M567.72 1245.41c-116.72,0 -214.32,-40.85 -298.37,-124.9 -84.05,-84.05 -124.91,-181.65 -124.91,-298.37 0,-115.1 42.02,-215.5 124.98,-298.45 81.76,-82.83 182.12,-124.83 298.29,-124.83 116.72,0 214.32,40.86 298.45,124.99 22.62,22.33 39.75,43.37 53.97,64.42 69.57,102.99 137.36,270.21 194.92,385.81l146.47 -291.71 80.15 -160.07c-23.52,10.85 -23.36,10.67 -51.83,22.46l-60.69 121.39 -114.76 226.65c-49.13,-98.69 -103.83,-233.55 -162.87,-322.79 -15.34,-23.19 -34.12,-46.47 -59.82,-71.85 -44.76,-44.75 -94.45,-78.82 -147.71,-101.26 -53.94,-22.73 -113.24,-34.25 -176.28,-34.25 -126.21,0 -235.24,45.62 -323.98,135.52 -89.91,89.92 -135.51,198.93 -135.51,323.98 0,63.03 11.52,122.34 34.25,176.28 22.44,53.25 56.51,102.95 101.26,147.7 44.76,44.76 94.45,78.83 147.71,101.26 53.94,22.73 113.24,34.25 176.28,34.25 63.03,0 122.34,-11.52 176.28,-34.25 41.59,-17.52 81,-42.17 117.58,-73.43 -7.37,-9.55 -14.63,-19.22 -21.76,-29 -77.99,67.52 -167.33,100.46 -272.1,100.46z" />
                            <path class="fil2"
                                d="M761.78 1017.5c-53.49,53.21 -116.97,79.09 -194.06,79.09 -70.63,0 -131.87,-22.56 -182.31,-67.06 -8.63,8.54 -17.52,16.79 -26.77,24.68 57.69,52.17 127.94,78.6 209.07,78.6 82.18,0 153.33,-27.6 211.67,-82.01 -6.16,-10.95 -12.04,-22.06 -17.61,-33.3z" />
                            <path class="fil1"
                                d="M1505.27 442.76l-390.14 780.26c-89.42,-178.84 -178.35,-378.77 -274.98,-551.39 -56.33,-100.64 -155.92,-161.13 -272.42,-161.13 -86.25,0 -160.73,30.75 -221.36,91.38 -0.79,0.79 -1.56,1.61 -2.34,2.4 7.26,8.7 14.56,17.36 21.95,25.95 1.02,0.08 2.05,0.16 3.07,0.26 0.97,-1 1.94,-2 2.93,-3 54.35,-54.35 118.37,-80.77 195.75,-80.77 103.36,0 190.57,53.41 240.67,142.42 107.77,191.48 207.29,415.97 306.74,614.88l443.3 -886.59c-17.74,8.42 -35.45,16.87 -53.16,25.33z" />
                            <g>
                                <path class="fil3"
                                    d="M448.62 814.98l-30.68 0 0 0 0.2 -7.76 0.58 -7.66 0.96 -7.56 1.33 -7.45 1.69 -7.31 2.04 -7.17 2.38 -7.03 2.71 -6.87 3.02 -6.69 3.34 -6.52 3.64 -6.33 3.93 -6.13 4.21 -5.92 4.48 -5.71 4.75 -5.48 5 -5.24 5.24 -5 5.48 -4.75 5.71 -4.48 5.92 -4.21 6.13 -3.93 6.33 -3.64 6.52 -3.34 6.69 -3.02 6.87 -2.71 7.03 -2.38 7.17 -2.04 7.31 -1.69 7.45 -1.33 7.56 -0.96 7.66 -0.58 7.76 -0.2 0 30.68 -6.21 0.16 -6.13 0.47 -6.03 0.76 -5.91 1.06 -5.82 1.35 -5.71 1.62 -5.58 1.89 -5.46 2.16 -5.33 2.41 -5.19 2.65 -5.04 2.9 -4.89 3.13 -4.72 3.36 -4.55 3.57 -4.37 3.78 -4.19 3.99 -3.99 4.19 -3.78 4.37 -3.57 4.55 -3.36 4.72 -3.13 4.88 -2.9 5.04 -2.65 5.19 -2.41 5.33 -2.16 5.46 -1.89 5.58 -1.62 5.71 -1.35 5.82 -1.06 5.92 -0.76 6.03 -0.47 6.13 -0.16 6.21 0 0zm72.19 125.23l-29.1 -9.71 7.45 18.45 -4.48 -2.44 -4.39 -2.59 -4.29 -2.72 -4.19 -2.86 -4.09 -3 -3.98 -3.13 -3.87 -3.26 -3.76 -3.38 -3.65 -3.51 -3.52 -3.63 -3.4 -3.74 -3.28 -3.86 -3.15 -3.96 -3.02 -4.07 -2.89 -4.18 -2.75 -4.28 -2.6 -4.37 -2.46 -4.46 -2.32 -4.56 -2.16 -4.65 -2.01 -4.73 -1.85 -4.81 -1.69 -4.89 -1.52 -4.96 -1.36 -5.04 -1.19 -5.1 -1.02 -5.17 -0.83 -5.23 -0.66 -5.27 -0.47 -5.34 -0.28 -5.38 -0.09 -5.43 30.68 0 0.08 4.35 0.23 4.3 0.38 4.25 0.52 4.22 0.66 4.16 0.81 4.11 0.94 4.07 1.08 4 1.22 3.95 1.34 3.89 1.47 3.82 1.6 3.77 1.72 3.7 1.84 3.62 1.97 3.57 2.07 3.48 2.19 3.41 2.3 3.33 2.41 3.24 2.51 3.17 2.62 3.08 2.72 2.98 2.81 2.89 2.91 2.79 3 2.7 3.09 2.6 3.18 2.5 3.26 2.39 3.34 2.28 3.42 2.17 3.5 2.06 3.57 1.94 7.45 18.45zm-7.45 -18.45l11.58 6.05 -4.13 12.4 -7.45 -18.45zm-72.67 161.71l51.02 -152.97 29.1 9.71 -51.02 152.97 -22.22 8.43 -6.88 -18.14zm6.88 18.14l-10.84 -6.26 3.96 -11.88 6.88 18.14zm122.37 -1.01l-0.76 30.67 0 0 -4.16 -0.13 -4.17 -0.18 -4.16 -0.24 -4.15 -0.29 -4.14 -0.34 -4.13 -0.39 -4.12 -0.44 -4.1 -0.49 -4.09 -0.54 -4.07 -0.59 -4.06 -0.65 -4.02 -0.7 -4 -0.74 -3.98 -0.8 -3.94 -0.85 -3.91 -0.9 -3.88 -0.95 -3.83 -1 -3.81 -1.05 -3.75 -1.1 -3.71 -1.15 -3.67 -1.2 -3.63 -1.25 -3.57 -1.31 -3.52 -1.36 -3.47 -1.41 -3.42 -1.47 -3.35 -1.52 -3.3 -1.57 -3.24 -1.63 -3.17 -1.69 -3.1 -1.74 15.34 -26.57 2.48 1.4 2.56 1.36 2.64 1.33 2.72 1.3 2.8 1.27 2.87 1.23 2.94 1.2 3.01 1.16 3.07 1.12 3.13 1.09 3.2 1.05 3.25 1.01 3.3 0.97 3.34 0.93 3.41 0.88 3.44 0.85 3.48 0.8 3.53 0.76 3.55 0.71 3.59 0.67 3.63 0.63 3.65 0.58 3.67 0.54 3.7 0.49 3.72 0.44 3.74 0.4 3.75 0.35 3.76 0.31 3.77 0.26 3.78 0.21 3.77 0.17 3.78 0.12 0 0zm95.94 -2.66l29.31 -9.04 -6.99 17.8 -3.06 1.72 -3.13 1.64 -3.18 1.57 -3.24 1.5 -3.31 1.44 -3.35 1.37 -3.41 1.31 -3.45 1.24 -3.51 1.19 -3.56 1.11 -3.58 1.06 -3.64 1 -3.69 0.94 -3.71 0.88 -3.76 0.83 -3.79 0.77 -3.82 0.72 -3.85 0.66 -3.87 0.6 -3.9 0.55 -3.93 0.5 -3.96 0.44 -3.97 0.39 -3.99 0.34 -4.02 0.28 -4.02 0.22 -4.03 0.18 -4.05 0.13 -4.05 0.07 -4.07 0.03 -4.07 -0.03 -4.07 -0.07 0.76 -30.67 3.69 0.07 3.69 0.03 3.67 -0.03 3.68 -0.07 3.65 -0.12 3.65 -0.16 3.62 -0.21 3.6 -0.25 3.58 -0.3 3.56 -0.35 3.52 -0.39 3.49 -0.44 3.47 -0.49 3.44 -0.54 3.39 -0.58 3.35 -0.62 3.31 -0.67 3.26 -0.72 3.21 -0.76 3.16 -0.81 3.1 -0.85 3.06 -0.9 2.99 -0.94 2.92 -0.99 2.87 -1.03 2.79 -1.07 2.73 -1.11 2.65 -1.15 2.57 -1.2 2.51 -1.24 2.42 -1.27 2.34 -1.31 -6.99 17.8zm29.31 -9.04l3.61 11.69 -10.59 6.11 6.99 -17.8zm-48.75 -158.06l48.75 158.06 -29.31 9.04 -48.75 -158.06 7.56 -18.12 21.76 9.08zm-29.31 9.04l-3.76 -12.2 11.32 -5.91 -7.56 18.12zm72.3 -124.9l30.68 0 0 0 -0.09 5.43 -0.28 5.38 -0.47 5.34 -0.66 5.27 -0.83 5.23 -1.02 5.17 -1.19 5.1 -1.36 5.04 -1.52 4.96 -1.69 4.89 -1.85 4.81 -2.01 4.73 -2.16 4.65 -2.32 4.56 -2.46 4.46 -2.6 4.37 -2.75 4.28 -2.89 4.18 -3.02 4.07 -3.15 3.96 -3.28 3.86 -3.4 3.74 -3.52 3.63 -3.65 3.51 -3.76 3.38 -3.87 3.26 -3.98 3.13 -4.09 3 -4.19 2.86 -4.29 2.72 -4.39 2.59 -4.48 2.44 -14.2 -27.2 3.57 -1.94 3.5 -2.06 3.42 -2.17 3.34 -2.28 3.26 -2.39 3.18 -2.5 3.09 -2.6 3 -2.7 2.91 -2.79 2.81 -2.89 2.72 -2.98 2.62 -3.08 2.51 -3.17 2.41 -3.24 2.3 -3.33 2.19 -3.41 2.07 -3.48 1.97 -3.57 1.84 -3.62 1.72 -3.7 1.6 -3.77 1.47 -3.82 1.34 -3.89 1.22 -3.95 1.08 -4 0.94 -4.07 0.81 -4.11 0.66 -4.16 0.52 -4.22 0.38 -4.25 0.23 -4.3 0.08 -4.35 0 0zm-120.41 -120.41l0 -30.68 0 0 7.76 0.2 7.66 0.58 7.56 0.96 7.45 1.33 7.31 1.69 7.17 2.04 7.03 2.38 6.87 2.71 6.69 3.02 6.52 3.34 6.33 3.65 6.12 3.93 5.92 4.21 5.71 4.48 5.48 4.75 5.24 5 5 5.24 4.75 5.48 4.48 5.71 4.21 5.92 3.93 6.12 3.65 6.33 3.34 6.52 3.02 6.69 2.71 6.87 2.38 7.03 2.04 7.17 1.69 7.31 1.33 7.44 0.96 7.57 0.58 7.66 0.2 7.76 -30.68 0 -0.16 -6.21 -0.47 -6.13 -0.76 -6.02 -1.06 -5.93 -1.35 -5.82 -1.62 -5.71 -1.89 -5.58 -2.16 -5.46 -2.41 -5.33 -2.65 -5.19 -2.9 -5.04 -3.14 -4.89 -3.36 -4.73 -3.57 -4.55 -3.78 -4.37 -3.99 -4.19 -4.19 -3.99 -4.37 -3.78 -4.55 -3.57 -4.73 -3.36 -4.89 -3.14 -5.04 -2.9 -5.19 -2.65 -5.33 -2.41 -5.46 -2.16 -5.58 -1.89 -5.71 -1.62 -5.82 -1.35 -5.92 -1.06 -6.03 -0.76 -6.13 -0.47 -6.21 -0.16 0 0z" />
                            </g>
                        </g>
                    </g>
                </svg>
            </div>

            <div class="controls">

                <!-- Language Dropdown -->
                <div class="dropdown" id="lang-dropdown">
                    <button class="icon-btn" id="lang-btn" title="Switch Language">
                        <!-- Translate SVG -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" />
                        </svg>
                    </button>
                    <div class="dropdown-menu">
                        <button class="dropdown-item" data-lang="fa">
                            <span class="item-icon">üáÆüá∑</span> ŸÅÿßÿ±ÿ≥€å
                        </button>
                        <button class="dropdown-item" data-lang="en">
                            <span class="item-icon">üá∫üá∏</span> English
                        </button>
                        <button class="dropdown-item" data-lang="ru">
                            <span class="item-icon">üá∑üá∫</span> –†—É—Å—Å–∫–∏–π
                        </button>
                        <button class="dropdown-item" data-lang="zh">
                            <span class="item-icon">üá®üá≥</span> ‰∏≠Êñá
                        </button>
                    </div>
                </div>

                <!-- Theme Dropdown -->
                <div class="dropdown" id="theme-dropdown">
                    <button class="icon-btn" id="theme-btn" title="Switch Theme">
                        <!-- Dynamic Theme Icon -->
                        <svg class="theme-icon-display" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <!-- Default to moon, updated by JS -->
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                        </svg>
                    </button>
                    <div class="dropdown-menu">
                        <button class="dropdown-item" data-theme="light">
                            <span class="item-icon">‚òÄÔ∏è</span> Light
                        </button>
                        <button class="dropdown-item" data-theme="dark">
                            <span class="item-icon">üåô</span> Dark
                        </button>
                        <button class="dropdown-item" data-theme="system">
                            <span class="item-icon">üñ•Ô∏è</span> System
                        </button>
                    </div>
                </div>

            </div>
        </div>

        <!-- Header -->
        <div class="header">
            <h2 id="title">ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿßÿ¥ÿ™ÿ±ÿß⁄© ÿ¥ŸÖÿß</h2>
            <div class="status-container">
                <div id="status-display" class="status-badge">
                    <!-- Template Logic for Status -->
                    <span id="template-status-wrapper">
                        {% if is_active %}
                        <span class="active-text" data-val="active">ŸÅÿπÿßŸÑ</span>
                        {% else %}
                        <span class="inactive-text" data-val="inactive">ÿ∫€åÿ±ŸÅÿπÿßŸÑ</span>
                        {% endif %}
                    </span>
                </div>
            </div>
        </div>

        <!-- Info Grid -->
        <div class="info-card">
            <div class="info-row">
                <span class="info-label" id="username-label">ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å</span>
                <span class="info-value" id="username">{{ name }}</span>
            </div>
            <div class="info-row">
                <span class="info-label" id="expiry-label">ÿ™ÿßÿ±€åÿÆ ÿßŸÜŸÇÿ∂ÿß</span>
                <span class="info-value" id="expiry">{{ expiry_date }}</span>
            </div>
        </div>

        <!-- Downloads -->
        <div class="links-section">
            <strong id="links-label">ÿØÿßŸÜŸÑŸàÿØ ⁄©ÿßŸÜŸÅ€å⁄Ø Ÿáÿß</strong>
            <div id="links-list" class="download-list">
                <!-- Template Logic for Links -->
                {% if ovpn_download_links %}
                {% for node, link in ovpn_download_links.items() %}
                <a href="{{ link }}" class="download-btn" download>
                    <span>{{ node }}</span>
                    <div class="btn-icon-container">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                    </div>
                </a>
                {% endfor %}
                {% else %}
                <!-- We keep this clean ID for JS to find -->
                <div id="no-links-msg" class="empty-state">
                    <span id="no-links-text">Ÿá€å⁄Ü ŸÑ€åŸÜ⁄©€å ŸÖŸàÿ¨ŸàÿØ ŸÜ€åÿ≥ÿ™.</span>
                </div>
                {% endif %}
            </div>
        </div>

    </div>
    {% raw %}
    <script>
        (function () {
            // --- 1. MOCK DATA LOGIC (Runs if template tags are detected) ---
            function checkAndMockData() {
                const usernameEl = document.getElementById('username');
                const rawContent = usernameEl ? usernameEl.textContent.trim() : '';

                // If we see curly braces, the backend didn't run. Let's mock it.
                if (rawContent.includes('{{') || rawContent === '') {
                    console.log("Template tags detected. Activating Preview Mode with Mock Data.");

                    // Mock User Info
                    document.getElementById('username').textContent = "User_12345";
                    document.getElementById('expiry').textContent = "2025/12/30";

                    // Mock Status (Force Active for preview)
                    const statusWrapper = document.getElementById('template-status-wrapper');
                    if (statusWrapper) {
                        // Rebuild status badge for preview
                        const statusBadge = document.getElementById('status-display');
                        statusBadge.innerHTML = `<span class="status-dot"></span><span id="status-text">Active</span>`;
                        statusBadge.className = 'status-badge active';
                    }

                    // Mock Links
                    const linksList = document.getElementById('links-list');
                    if (linksList) {
                        // Clear the "raw" template logic code that might be visible
                        linksList.innerHTML = '';

                        // Add fake buttons
                        const mockLinks = [
                            { name: "Germany", link: "#" },
                            { name: "France", link: "#" },
                            { name: "Netherlands", link: "#" }
                        ];

                        const downloadIcon = `
                            <div class="btn-icon-container">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                                </svg>
                            </div>`;

                        mockLinks.forEach(item => {
                            const a = document.createElement('a');
                            a.className = 'download-btn';
                            a.href = item.link;
                            a.innerHTML = `<span>${item.name}</span>${downloadIcon}`;
                            linksList.appendChild(a);
                        });
                    }
                } else {
                    // Backend ran successfully. Let's just style the status badge properly based on template output.
                    const statusWrapper = document.getElementById('template-status-wrapper');
                    const statusBadge = document.getElementById('status-display');

                    if (statusWrapper && statusBadge) {
                        // Check if the template rendered "active" or "inactive" classes/text
                        const isActive = statusWrapper.querySelector('.active-text') !== null;
                        const isInactive = statusWrapper.querySelector('.inactive-text') !== null;

                        // Clean up the wrapper and show clean badge
                        if (isActive) {
                            statusBadge.classList.add('active');
                            statusBadge.innerHTML = `<span class="status-dot"></span><span id="status-text">Active</span>`;
                        } else if (isInactive) {
                            statusBadge.classList.add('inactive');
                            statusBadge.innerHTML = `<span class="status-dot"></span><span id="status-text">Inactive</span>`;
                        }
                    }
                }
            }

            // --- 2. LANGUAGE DATA ---
            const langData = {
                fa: {
                    title: "ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿßÿ¥ÿ™ÿ±ÿß⁄© ÿ¥ŸÖÿß",
                    username: "ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å",
                    expiry: "ÿ™ÿßÿ±€åÿÆ ÿßŸÜŸÇÿ∂ÿß",
                    active: "ŸÅÿπÿßŸÑ",
                    inactive: "ÿ∫€åÿ±ŸÅÿπÿßŸÑ",
                    links: "ÿØÿßŸÜŸÑŸàÿØ ⁄©ÿßŸÜŸÅ€å⁄Ø Ÿáÿß",
                    noLinks: "Ÿá€å⁄Ü ŸÑ€åŸÜ⁄©€å ŸÖŸàÿ¨ŸàÿØ ŸÜ€åÿ≥ÿ™",
                    dir: "rtl",
                    themeLight: "ÿ±Ÿàÿ¥ŸÜ", themeDark: "ÿ™ÿßÿ±€å⁄©", themeSystem: "ÿ≥€åÿ≥ÿ™ŸÖ"
                },
                en: {
                    title: "Subscription Details",
                    username: "Username",
                    expiry: "Expiry Date",
                    active: "Active",
                    inactive: "Inactive",
                    links: "Download Configs",
                    noLinks: "No links available",
                    dir: "ltr",
                    themeLight: "Light", themeDark: "Dark", themeSystem: "System"
                },
                ru: {
                    title: "–î–µ—Ç–∞–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏",
                    username: "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
                    expiry: "–î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è",
                    active: "–ê–∫—Ç–∏–≤–µ–Ω",
                    inactive: "–ù–µ–∞–∫—Ç–∏–≤–µ–Ω",
                    links: "–°–∫–∞—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏",
                    noLinks: "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Å—ã–ª–æ–∫",
                    dir: "ltr",
                    themeLight: "–°–≤–µ—Ç–ª–∞—è", themeDark: "–¢–µ–º–Ω–∞—è", themeSystem: "–°–∏—Å—Ç–µ–º–Ω–∞—è"
                },
                zh: {
                    title: "ËÆ¢ÈòÖËØ¶ÊÉÖ",
                    username: "Áî®Êà∑Âêç",
                    expiry: "Âà∞ÊúüÊó•Êúü",
                    active: "ÊúâÊïà",
                    inactive: "Êó†Êïà",
                    links: "‰∏ãËΩΩÈÖçÁΩÆ",
                    noLinks: "Êó†ÂèØÁî®ÈìæÊé•",
                    dir: "ltr",
                    themeLight: "ÊµÖËâ≤", themeDark: "Ê∑±Ëâ≤", themeSystem: "Á≥ªÁªü"
                }
            };

            // --- 3. THEME ICONS ---
            const icons = {
                light: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />',
                dark: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />',
                system: '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />'
            };

            // --- 4. CORE UI FUNCTIONS ---

            function updateUI(lang, themePref) {
                // 1. Update Text
                const dict = langData[lang];
                document.getElementById('title').textContent = dict.title;
                document.getElementById('username-label').textContent = dict.username;
                document.getElementById('expiry-label').textContent = dict.expiry;
                document.getElementById('links-label').textContent = dict.links;
                const noLinksText = document.getElementById('no-links-text');
                if (noLinksText) noLinksText.textContent = dict.noLinks;

                // Update Dropdown Text Localization
                const themeItems = document.querySelectorAll('#theme-dropdown .dropdown-item');
                themeItems.forEach(item => {
                    const t = item.dataset.theme;
                    const label = t === 'light' ? dict.themeLight : (t === 'dark' ? dict.themeDark : dict.themeSystem);
                    const icon = item.querySelector('.item-icon').textContent;
                    // item.innerHTML = `<span class="item-icon">${icon}</span> ${label}`;
                    // Keep the structure, just update text node if possible, or rebuild
                    item.childNodes.forEach(n => {
                        if (n.nodeType === 3 && n.textContent.trim().length > 0) {
                            n.textContent = " " + label;
                        }
                    });
                });

                // Update Status
                const statusText = document.getElementById('status-text');
                if (statusText) {
                    const isActive = document.getElementById('status-display').classList.contains('active');
                    statusText.textContent = isActive ? dict.active : dict.inactive;
                }

                // Update Dir & Lang
                document.documentElement.lang = lang;
                document.documentElement.dir = dict.dir;

                // 2. Handle Theme
                const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                let effectiveTheme = themePref;

                if (themePref === 'system') {
                    effectiveTheme = systemDark ? 'dark' : 'light';
                }

                document.documentElement.setAttribute('data-theme', effectiveTheme);

                // Update Button Icon
                const svg = document.querySelector('.theme-icon-display');
                // If system, show monitor. If light/dark manual, show sun/moon
                svg.innerHTML = icons[themePref === 'system' ? 'system' : effectiveTheme];

                // 3. Update Active States in Dropdowns
                document.querySelectorAll('.dropdown-item').forEach(btn => btn.classList.remove('selected'));
                document.querySelector(`[data-lang="${lang}"]`)?.classList.add('selected');
                document.querySelector(`[data-theme="${themePref}"]`)?.classList.add('selected');

                // 4. Save
                localStorage.setItem('sub_lang', lang);
                localStorage.setItem('sub_theme', themePref);
            }

            // --- 5. DROPDOWN LOGIC ---
            function setupDropdown(id) {
                const container = document.getElementById(id);
                const btn = container.querySelector('.icon-btn');

                btn.onclick = (e) => {
                    e.stopPropagation();
                    // Close others
                    document.querySelectorAll('.dropdown').forEach(d => {
                        if (d !== container) d.classList.remove('open');
                    });
                    container.classList.toggle('open');
                    btn.classList.toggle('active');
                };
            }

            setupDropdown('lang-dropdown');
            setupDropdown('theme-dropdown');

            // Click outside to close
            document.addEventListener('click', () => {
                document.querySelectorAll('.dropdown').forEach(d => {
                    d.classList.remove('open');
                    d.querySelector('.icon-btn').classList.remove('active');
                });
            });

            // Selection Logic
            document.querySelectorAll('#lang-dropdown .dropdown-item').forEach(item => {
                item.onclick = () => {
                    const l = item.dataset.lang;
                    const currentTheme = localStorage.getItem('sub_theme') || 'system';
                    updateUI(l, currentTheme);
                };
            });

            document.querySelectorAll('#theme-dropdown .dropdown-item').forEach(item => {
                item.onclick = () => {
                    const t = item.dataset.theme;
                    const currentLang = localStorage.getItem('sub_lang') || 'fa';
                    updateUI(currentLang, t);
                };
            });

            // --- 6. SYSTEM THEME LISTENER ---
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                const currentThemePref = localStorage.getItem('sub_theme') || 'system';
                if (currentThemePref === 'system') {
                    // Re-run update to apply new system preference
                    const currentLang = localStorage.getItem('sub_lang') || 'fa';
                    updateUI(currentLang, 'system');
                }
            });

            // --- 7. INITIALIZATION ---
            checkAndMockData();

            const savedLang = localStorage.getItem('sub_lang') || 'fa';
            // Default to 'system' if nothing saved
            const savedTheme = localStorage.getItem('sub_theme') || 'system';

            updateUI(savedLang, savedTheme);

        })();
    </script>
    {% endraw %}
</body>

</html>